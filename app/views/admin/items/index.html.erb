<h1 class="my-4 text-center">商品管理一覧</h1>
<%= link_to '新規商品登録', new_admin_item_path, class:"btn btn-success btn-lg mb-4" %>

<div class="row row-cols-2 row-cols-md-4 g-4">
  <% @items.each do |item| %>
    <div class="col">
      <div class="card shadow-lg">
        <%= link_to admin_item_path(item) do %>
          <% if item.image.attached? %>
            <%= image_tag item.image, class: "card-img-top", style: "width: 100%; height: 200px; object-fit: cover;" %>
          <% else %>
            <%= image_tag 'no_image.jpg', class: "card-img-top", style: "width: 100%; height: 200px; object-fit: cover;" %>
          <% end %>
        <% end %>
        <div class="card-body d-flex flex-column text-center" style="height: 240px;">
          <h5 class="card-title text-truncate" style="max-width: 180px; font-size: clamp(12px, 1.5vw, 16px);">
            <%= link_to item.name, admin_item_path(item) %></h5>
          <p class="card-price" style="font-size: clamp(12px, 1.2vw, 14px);">
            <strong>税抜価格:</strong> <%= item.price %>円<br>
            <strong>税込価格:</strong> <%= (item.price * 1.1).floor %>円
          </p>
          <div class="mt-auto d-flex justify-content-between">
            <%= link_to '編集', edit_admin_item_path(item), class:"btn btn-primary btn-sm" %>
            <%= link_to '削除', admin_item_path(item), class:"btn btn-danger btn-sm", method: :delete, data: { confirm: '本当に削除しますか？' } %>
          </div>
        </div>
      </div>
    </div>
  <% end %>
</div>

<%= paginate @items %>